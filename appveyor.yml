version: '{build}'

shallow_clone: true

cache:
 - '%LOCALAPPDATA%\\Yarn'

environment:
  NODEJS_VERSION: '6.9.4'

install:
  - ps: Install-Product node $env:NODEJS_VERSION
  - yarn install

build_script:
  - yarn run build

test_script:
  - yarn run lint
  - yarn run cover

after_test:
  # Upload coverge to codecov
  - node_modules\.bin\nyc report --reporter=lcov > coverage.lcov && node_modules\.bin\codecov
